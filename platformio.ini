; PlatformIO Project Configuration File
;
; ESP32 Single-Plant Automatic Watering System
;
; Build options: build flags, source filter
; Upload options: port, speed
; Library options: dependencies, extra lib storages
; Advanced options: scripting

; [env:esp32dev]
; platform = espressif32
; board = esp32-c3-devkitm-1
; framework = arduino






; Upload settings (adjust port for your system)
;upload_port = COM8        ; Windows
; upload_port = /dev/ttyUSB0  ; Linux

; OTA updates (optional, for future WiFi version)
; upload_protocol = espota
; upload_port = 192.168.1.100

; [env:esp32dev-release]
; ; Production build without debug output
; platform = espressif32
; board = esp32dev
; framework = arduino


[env:esp32c3]
platform = espressif32
board = esp32-c3-devkitc-02
framework = arduino

upload_speed = 115200
monitor_speed = 115200

build_flags = 
    -D DEBUG_SERIAL          ; Enable serial debugging (comment out for production)
    -D CORE_DEBUG_LEVEL=0
    -O2                      ; Optimize for speed/size

; Exclude the hardware test file from the main build
build_src_filter = +<*> -<hardware_test.cpp>

; Partition scheme (default is fine for this project)
board_build.partitions = default.csv

; Reduce code size
build_unflags = -Os

[env:hardware_test]
platform = espressif32
board = esp32-c3-devkitc-02
framework = arduino

upload_speed = 115200
monitor_speed = 115200

build_flags = 
    -O2

; Only compile the test file (excludes main.cpp)
build_src_filter = +<hardware_test.cpp>

[platformio]
; Default environment (change to hardware_test for wiring test)
default_envs = esp32c3

; Source directory
src_dir = src

; Build directory
build_dir = .pio/build
